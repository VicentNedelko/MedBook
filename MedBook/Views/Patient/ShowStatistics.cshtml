@model IndicatorStatisticsVM[]
@using MedBook.Models.ViewModels
@using System.Globalization;

    


<h4>Статистика показателя - @ViewBag.IndicatorName</h4>
<div id="chart" style="width:900px; height:500px"></div>


<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load('current', { 'packages': ['corechart'] });
    google.charts.setOnLoadCallback(drawChart);

    function drawChart()
    {
        const data = new google.visualization.DataTable();
        data.addColumn('date', 'Date');
        data.addColumn('number', 'Value');
        @foreach(var ind in Model)
            {
                @:data.addRow([new Date(@ind.ResearchDate.ToString("yyyy, MM, dd")), Number(parseFloat(@ind.Value.ToString("F2", CultureInfo.InvariantCulture)).toFixed(2))]);
                @:console.log(new Date(@ind.ResearchDate.ToString("yyyy, MM, dd")));
                @:console.log(@ind.Value.ToString("F2", CultureInfo.InvariantCulture));
            }

        var options =
        {
            title: 'Box Office Earnings in First Two Weeks of Opening',
            width: 900,
            height: 500,
            curveType: 'function',
            legend: { position: 'bottom' }
        };
        console.log('start chart creating');
        var chart = new google.visualization.LineChart(document.getElementById('chart'));
        chart.draw(data, options);
    };

</script>