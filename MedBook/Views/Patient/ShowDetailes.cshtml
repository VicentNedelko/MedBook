@model MedBook.Models.Patient

<h4>Данные пациента</h4>

@if(Model == null)
{
    @ViewBag.Error
}
<form>
    <div>
        <label>Фамилия : <b>@Model.LName</b></label><br />
        <label>Имя : <b>@Model.FName</b></label><br />
        <label>Возраст : <b>@Model.Age</b></label><br />
        <label>Пол : @Patient.GenderToStrConverter(Model.Gender)</label>

    </div><br />
    <p>@ViewBag.ResearchError</p>
    @{
        if (ViewBag.ResearchList != null)
        {
            <div>
                <table class="table table-hover">
                    <thead class="table-light">
                        <tr class="table-primary">
                            <th class="col-lg-1">№</th>
                            <th class="col-lg-2">Дата</th>
                            <th class="col-lg-2">Лаборатория</th>
                            <th class="col-lg-5">Комментарий</th>
                            <th class="col-lg-2">Подробно</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            int j = 0;
                            foreach (var research in ViewBag.ResearchList)
                            {
                                j++;
                                <tr>
                                    <td>@j</td>
                                    <td>@research.ResearchDate.ToShortDateString()</td>
                                    <td>@research.Order</td>
                                    @if (research.Comment != null)
                                    {
                                        <td>@research.Comment</td>
                                    }
                                    else
                                    {
                                        <td></td>
                                    }
                                    <td><a asp-controller="Research" asp-action="ResearchDetailes" asp-route-id="@research.Id">Подробно...</a></td>
                                </tr>
                            }
                        }

                    </tbody>
                </table>
            </div>
            <br />
        }
        <button asp-controller="Patient" asp-action="ResearchUpload" asp-route-id="@Model.Id" class="btn btn-secondary">Добавить документ</button>
        <button asp-controller="Patient" asp-action="AddNewResearch" asp-route-id="@Model.Id" class="btn btn-secondary">Внести вручную</button>
        @if (ViewBag.ResearchList != null)
        {
            <button asp-controller="Patient" asp-action="ShowFullReport" asp-route-id="@Model.Id" class="btn btn-secondary">Отчёт</button>
        }

    }


</form>
